(()=>{var e={};e.id=313,e.ids=[313],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8473:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>u,tree:()=>c});var a=s(482),r=s(9108),n=s(2563),i=s.n(n),l=s(8300),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(t,d);let c=["",{children:["campaigns",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,3163)),"/Users/marius/Documents/Projects/NewselletOf-the -future/app/campaigns/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,2917)),"/Users/marius/Documents/Projects/NewselletOf-the -future/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/marius/Documents/Projects/NewselletOf-the -future/app/campaigns/[id]/page.tsx"],m="/campaigns/[id]/page",x={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/campaigns/[id]/page",pathname:"/campaigns/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},616:(e,t,s)=>{Promise.resolve().then(s.bind(s,3323))},4434:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2583,23)),Promise.resolve().then(s.t.bind(s,6840,23)),Promise.resolve().then(s.t.bind(s,8771,23)),Promise.resolve().then(s.t.bind(s,3225,23)),Promise.resolve().then(s.t.bind(s,9295,23)),Promise.resolve().then(s.t.bind(s,3982,23))},6989:()=>{},3323:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var a=s(2295),r=s(3729),n=s(2254),i=s(8974),l=s(783),d=s.n(l);function c(){let e=(0,n.useParams)(),t=(0,n.useRouter)(),[s,l]=(0,r.useState)(null),[c,o]=(0,r.useState)(!0),[m,x]=(0,r.useState)(!1),[u,g]=(0,r.useState)(null),p=e.id;(0,r.useEffect)(()=>{p&&(async()=>{try{let e=await fetch(`/api/campaigns/${p}`);if(!e.ok)throw Error("Failed to fetch campaign");let t=await e.json();l(t.campaign)}catch(e){console.error("Error fetching campaign:",e),g("Failed to load campaign")}finally{o(!1)}})()},[p]);let h=async()=>{if(s&&"draft"===s.status){x(!0),g(null);try{let e=await fetch(`/api/campaigns/${p}/send`,{method:"POST"});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to send campaign")}let t=await e.json();l(e=>e?{...e,status:"sent",sent_at:new Date().toISOString()}:null),alert(`Campaign sent successfully! ${t.results.successful} emails sent.`)}catch(e){console.error("Error sending campaign:",e),g(e instanceof Error?e.message:"Failed to send campaign")}finally{x(!1)}}},f=async()=>{if(s&&"sent"!==s.status&&confirm("Are you sure you want to delete this campaign?"))try{let e=await fetch(`/api/campaigns/${p}`,{method:"DELETE"});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed to delete campaign")}t.push("/campaigns")}catch(e){console.error("Error deleting campaign:",e),g(e instanceof Error?e.message:"Failed to delete campaign")}};return c?a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading campaign..."})]})}):u||!s?(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Campaign Not Found"}),a.jsx("p",{className:"text-gray-600 mb-6",children:u||"The campaign you are looking for does not exist."}),a.jsx(d(),{href:"/campaigns",children:a.jsx(i.z,{children:"Back to Campaigns"})})]}):(0,a.jsxs)("div",{className:"max-w-4xl mx-auto space-y-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:s.name}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${(e=>{switch(e){case"draft":default:return"bg-gray-100 text-gray-800";case"sending":return"bg-blue-100 text-blue-800";case"sent":return"bg-green-100 text-green-800";case"failed":return"bg-red-100 text-red-800"}})(s.status)}`,children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})]}),(0,a.jsxs)("p",{className:"text-gray-600",children:["Created on ",new Date(s.created_at).toLocaleDateString()]})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:["draft"===s.status&&(0,a.jsxs)(a.Fragment,{children:[a.jsx(i.z,{onClick:h,disabled:m,children:m?"Sending...":"Send Campaign"}),a.jsx(i.z,{variant:"outline",asChild:!0,children:a.jsx(d(),{href:`/campaigns/${p}/edit`,children:"Edit"})})]}),"sent"!==s.status&&a.jsx(i.z,{variant:"destructive",onClick:f,children:"Delete"})]})]}),u&&a.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-md",children:a.jsx("p",{className:"text-red-800",children:u})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg border",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Campaign Details"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Subject"}),a.jsx("p",{className:"text-gray-900",children:s.subject})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Email List"}),a.jsx("p",{className:"text-gray-900",children:s.email_lists.name})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Template"}),a.jsx("p",{className:"text-gray-900 capitalize",children:s.template_id||"Custom"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Recipients"}),(0,a.jsxs)("p",{className:"text-gray-900",children:[s.recipient_count," subscribers"]})]}),s.sent_at&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Sent At"}),a.jsx("p",{className:"text-gray-900",children:new Date(s.sent_at).toLocaleString()})]})]})]}),s.analytics&&"sent"===s.status&&(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg border",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Analytics"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:s.analytics.sent}),a.jsx("div",{className:"text-sm text-gray-600",children:"Sent"})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.analytics.delivered}),a.jsx("div",{className:"text-sm text-gray-600",children:"Delivered"})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-red-600",children:s.analytics.bounced}),a.jsx("div",{className:"text-sm text-gray-600",children:"Bounced"})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-600",children:s.analytics.opened}),a.jsx("div",{className:"text-sm text-gray-600",children:"Opened"})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg border",children:[a.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Content Preview"}),a.jsx("div",{className:"border rounded-lg p-4 bg-gray-50 max-h-96 overflow-y-auto",children:(0,a.jsxs)("div",{className:"bg-white rounded-md p-4",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-500 mb-2",children:["Subject: ",s.subject]}),a.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:s.content}})]})})]})]})]})}},8974:(e,t,s)=>{"use strict";s.d(t,{z:()=>c});var a=s(2295),r=s(3729),n=s(2751),i=s(9247),l=s(1626);let d=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef(({className:e,variant:t,size:s,asChild:r=!1,...i},c)=>{let o=r?n.g7:"button";return a.jsx(o,{className:(0,l.cn)(d({variant:t,size:s,className:e})),ref:c,...i})});c.displayName="Button"},1626:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var a=s(6815),r=s(9328);function n(...e){return(0,r.m6)((0,a.W)(e))}},783:(e,t,s)=>{e.exports=s(1476)},3163:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>r,default:()=>i});let a=(0,s(6843).createProxy)(String.raw`/Users/marius/Documents/Projects/NewselletOf-the -future/app/campaigns/[id]/page.tsx`),{__esModule:r,$$typeof:n}=a,i=a.default},2917:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l,metadata:()=>i});var a=s(5036),r=s(8592),n=s.n(r);s(7272);let i={title:"NextMailer Personal - Email Campaign Management",description:"Self-hosted email marketing platform for personal use"};function l({children:e}){return a.jsx("html",{lang:"en",children:a.jsx("body",{className:n().className,children:(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[a.jsx("nav",{className:"border-b",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between h-16",children:[a.jsx("div",{className:"flex items-center",children:a.jsx("h1",{className:"text-xl font-bold text-primary",children:"NextMailer Personal"})}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx("a",{href:"/campaigns",className:"text-sm font-medium text-gray-700 hover:text-gray-900",children:"Campaigns"}),a.jsx("a",{href:"/campaigns/new",className:"bg-primary text-primary-foreground px-4 py-2 rounded-md text-sm font-medium hover:bg-primary/90",children:"New Campaign"})]})]})})}),a.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e})]})})})}},7272:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[638,941,227,476],()=>s(8473));module.exports=a})();