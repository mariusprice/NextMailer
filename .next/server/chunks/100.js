"use strict";exports.id=100,exports.ids=[100],exports.modules={7100:(e,t,n)=>{n.d(t,{getDefaultRoleAssumer:()=>t3,getDefaultRoleAssumerWithWebIdentity:()=>t9});var s=n(4964),i=n(8976),r=n(9611),o=n(912),a=n(1827),l=n(8524),c=n(8365),d=n(10),u=n(1025),p=n(8303),h=n(6029),m=n(8253);let f=async(e,t,n)=>({operation:(0,m.J)(t).operation,region:await (0,m.$)(e.region)()||(()=>{throw Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),g=e=>{let t=[];return"AssumeRoleWithWebIdentity"===e.operation?t.push({schemeId:"smithy.api#noAuth"}):t.push({schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:e.region},propertiesExtractor:(e,t)=>({signingProperties:{config:e,context:t}})}),t},y=e=>Object.assign(e,{stsClientCtor:eI}),S=e=>{let t=y(e);return Object.assign((0,h.K)(t),{authSchemePreference:(0,m.$)(e.authSchemePreference??[])})},P=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"}),E={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};var b=n(8536),w=n(3387),A=n(9055),I=n(3472),v=n(2153),x=n(5607),C=n(4994),R=n(9269),k=n(224),D=n(3295),T=n(8595),$=n(7129),O=n(9339),j=n(1032),W=n(7446);let K="required",z="type",Y="argv",F="booleanEquals",U="stringEquals",H="sigv4",M="us-east-1",q="endpoint",_="https://sts.{Region}.{PartitionResult#dnsSuffix}",G="tree",L="error",N="getAttr",V={[K]:!1,[z]:"String"},B={[K]:!0,default:!1,[z]:"Boolean"},X={ref:"Endpoint"},Z={fn:"isSet",[Y]:[{ref:"Region"}]},J={ref:"Region"},Q={fn:"aws.partition",[Y]:[J],assign:"PartitionResult"},ee={ref:"UseFIPS"},et={ref:"UseDualStack"},en={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:H,signingName:"sts",signingRegion:M}]},headers:{}},es={},ei={conditions:[{fn:U,[Y]:[J,"aws-global"]}],[q]:en,[z]:q},er={fn:F,[Y]:[ee,!0]},eo={fn:F,[Y]:[et,!0]},ea={fn:N,[Y]:[{ref:"PartitionResult"},"supportsFIPS"]},el={ref:"PartitionResult"},ec={fn:F,[Y]:[!0,{fn:N,[Y]:[el,"supportsDualStack"]}]},ed=[{fn:"isSet",[Y]:[X]}],eu=[er],ep=[eo],eh={version:"1.0",parameters:{Region:V,UseDualStack:B,UseFIPS:B,Endpoint:V,UseGlobalEndpoint:B},rules:[{conditions:[{fn:F,[Y]:[{ref:"UseGlobalEndpoint"},!0]},{fn:"not",[Y]:ed},Z,Q,{fn:F,[Y]:[ee,!1]},{fn:F,[Y]:[et,!1]}],rules:[{conditions:[{fn:U,[Y]:[J,"ap-northeast-1"]}],endpoint:en,[z]:q},{conditions:[{fn:U,[Y]:[J,"ap-south-1"]}],endpoint:en,[z]:q},{conditions:[{fn:U,[Y]:[J,"ap-southeast-1"]}],endpoint:en,[z]:q},{conditions:[{fn:U,[Y]:[J,"ap-southeast-2"]}],endpoint:en,[z]:q},ei,{conditions:[{fn:U,[Y]:[J,"ca-central-1"]}],endpoint:en,[z]:q},{conditions:[{fn:U,[Y]:[J,"eu-central-1"]}],endpoint:en,[z]:q},{conditions:[{fn:U,[Y]:[J,"eu-north-1"]}],endpoint:en,[z]:q},{conditions:[{fn:U,[Y]:[J,"eu-west-1"]}],endpoint:en,[z]:q},{conditions:[{fn:U,[Y]:[J,"eu-west-2"]}],endpoint:en,[z]:q},{conditions:[{fn:U,[Y]:[J,"eu-west-3"]}],endpoint:en,[z]:q},{conditions:[{fn:U,[Y]:[J,"sa-east-1"]}],endpoint:en,[z]:q},{conditions:[{fn:U,[Y]:[J,M]}],endpoint:en,[z]:q},{conditions:[{fn:U,[Y]:[J,"us-east-2"]}],endpoint:en,[z]:q},{conditions:[{fn:U,[Y]:[J,"us-west-1"]}],endpoint:en,[z]:q},{conditions:[{fn:U,[Y]:[J,"us-west-2"]}],endpoint:en,[z]:q},{endpoint:{url:_,properties:{authSchemes:[{name:H,signingName:"sts",signingRegion:"{Region}"}]},headers:es},[z]:q}],[z]:G},{conditions:ed,rules:[{conditions:eu,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[z]:L},{conditions:ep,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[z]:L},{endpoint:{url:X,properties:es,headers:es},[z]:q}],[z]:G},{conditions:[Z],rules:[{conditions:[Q],rules:[{conditions:[er,eo],rules:[{conditions:[{fn:F,[Y]:[!0,ea]},ec],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:es,headers:es},[z]:q}],[z]:G},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[z]:L}],[z]:G},{conditions:eu,rules:[{conditions:[{fn:F,[Y]:[ea,!0]}],rules:[{conditions:[{fn:U,[Y]:[{fn:N,[Y]:[el,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:es,headers:es},[z]:q},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:es,headers:es},[z]:q}],[z]:G},{error:"FIPS is enabled but this partition does not support FIPS",[z]:L}],[z]:G},{conditions:ep,rules:[{conditions:[ec],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:es,headers:es},[z]:q}],[z]:G},{error:"DualStack is enabled but this partition does not support DualStack",[z]:L}],[z]:G},ei,{endpoint:{url:_,properties:es,headers:es},[z]:q}],[z]:G}],[z]:G},{error:"Invalid Configuration: Missing Region",[z]:L}]},em=new W.$X({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),ef=(e,t={})=>em.get(e,()=>(0,W.B1)(eh,{endpointParams:e,logger:t.logger}));W.DY.aws=j.Iu;let eg=e=>({apiVersion:"2011-06-15",base64Decoder:e?.base64Decoder??$.G,base64Encoder:e?.base64Encoder??$.s,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??ef,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??g,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new I.VR},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new l.oH}],logger:e?.logger??new p.vk,serviceId:e?.serviceId??"STS",urlParser:e?.urlParser??T.e,utf8Decoder:e?.utf8Decoder??O.$x,utf8Encoder:e?.utf8Encoder??O.GZ});var ey=n(6685);let eS=e=>{(0,p.H_)(process.version);let t=(0,ey.j)(e),n=()=>t().then(p.jv),s=eg(e);(0,w.H)(process.version);let i={profile:e?.profile,logger:s.logger};return{...s,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,C.M)(A.I,i),bodyLengthChecker:e?.bodyLengthChecker??k.W,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,v.kk)({serviceId:s.serviceId,clientVersion:b.i8}),httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4")||(async t=>await e.credentialDefaultProvider(t?.__config||{})()),signer:new I.VR},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new l.oH}],maxAttempts:e?.maxAttempts??(0,C.M)(u.Hs,e),region:e?.region??(0,C.M)(a._c,{...a.zb,...i}),requestHandler:R.NA.create(e?.requestHandler??n),retryMode:e?.retryMode??(0,C.M)({...u.aK,default:async()=>(await n()).retryMode||D.CA},e),sha256:e?.sha256??x.k.bind(null,"sha256"),streamCollector:e?.streamCollector??R.CF,useDualstackEndpoint:e?.useDualstackEndpoint??(0,C.M)(a.G7,i),useFipsEndpoint:e?.useFipsEndpoint??(0,C.M)(a.NL,i),userAgentAppId:e?.userAgentAppId??(0,C.M)(v.eX,i)}};var eP=n(9244),eE=n(2426);let eb=e=>{let t=e.httpAuthSchemes,n=e.httpAuthSchemeProvider,s=e.credentials;return{setHttpAuthScheme(e){let n=t.findIndex(t=>t.schemeId===e.schemeId);-1===n?t.push(e):t.splice(n,1,e)},httpAuthSchemes:()=>t,setHttpAuthSchemeProvider(e){n=e},httpAuthSchemeProvider:()=>n,setCredentials(e){s=e},credentials:()=>s}},ew=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),eA=(e,t)=>{let n=Object.assign((0,eP.GW)(e),(0,p.kE)(e),(0,eE.cA)(e),eb(e));return t.forEach(e=>e.configure(n)),Object.assign(e,(0,eP.A1)(n),(0,p.SQ)(n),(0,eE.AO)(n),ew(n))};class eI extends p.KU{constructor(...[e]){let t=eS(e||{});super(t),this.initConfig=t;let n=P(t),p=(0,o.er)(n),h=(0,u.BC)(p),m=(0,a.Xb)(h),g=(0,s.S8)(m),y=eA(S((0,d.uW)(g)),e?.extensions||[]);this.config=y,this.middlewareStack.use((0,o.XJ)(this.config)),this.middlewareStack.use((0,u.NQ)(this.config)),this.middlewareStack.use((0,c.VG)(this.config)),this.middlewareStack.use((0,s.G2)(this.config)),this.middlewareStack.use((0,i.cV)(this.config)),this.middlewareStack.use((0,r.eV)(this.config)),this.middlewareStack.use((0,l.tZ)(this.config,{httpAuthSchemeParametersProvider:f,identityProviderConfigProvider:async e=>new l.K5({"aws.auth#sigv4":e.credentials})})),this.middlewareStack.use((0,l.aZ)(this.config))}destroy(){super.destroy()}}var ev=n(7589);class ex extends p.sI{constructor(e){super(e),Object.setPrototypeOf(this,ex.prototype)}}let eC=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:p.oc}}),eR=e=>({...e,...e.Credentials&&{Credentials:eC(e.Credentials)}});class ek extends ex{constructor(e){super({name:"ExpiredTokenException",$fault:"client",...e}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,ek.prototype)}}class eD extends ex{constructor(e){super({name:"MalformedPolicyDocumentException",$fault:"client",...e}),this.name="MalformedPolicyDocumentException",this.$fault="client",Object.setPrototypeOf(this,eD.prototype)}}class eT extends ex{constructor(e){super({name:"PackedPolicyTooLargeException",$fault:"client",...e}),this.name="PackedPolicyTooLargeException",this.$fault="client",Object.setPrototypeOf(this,eT.prototype)}}class e$ extends ex{constructor(e){super({name:"RegionDisabledException",$fault:"client",...e}),this.name="RegionDisabledException",this.$fault="client",Object.setPrototypeOf(this,e$.prototype)}}class eO extends ex{constructor(e){super({name:"IDPRejectedClaimException",$fault:"client",...e}),this.name="IDPRejectedClaimException",this.$fault="client",Object.setPrototypeOf(this,eO.prototype)}}class ej extends ex{constructor(e){super({name:"InvalidIdentityTokenException",$fault:"client",...e}),this.name="InvalidIdentityTokenException",this.$fault="client",Object.setPrototypeOf(this,ej.prototype)}}let eW=e=>({...e,...e.WebIdentityToken&&{WebIdentityToken:p.oc}}),eK=e=>({...e,...e.Credentials&&{Credentials:eC(e.Credentials)}});class ez extends ex{constructor(e){super({name:"IDPCommunicationErrorException",$fault:"client",...e}),this.name="IDPCommunicationErrorException",this.$fault="client",Object.setPrototypeOf(this,ez.prototype)}}var eY=n(618);let eF=async(e,t)=>{let n;return n=tV({...eZ(e,t),[tp]:tm,[tq]:tu}),tc(t,td,"/",void 0,n)},eU=async(e,t)=>{let n;return n=tV({...eJ(e,t),[tp]:ty,[tq]:tu}),tc(t,td,"/",void 0,n)},eH=async(e,t)=>{if(e.statusCode>=300)return eq(e,t);let n=await (0,eY.he)(e.body,t),s={};return s=e3(n.AssumeRoleResult,t),{$metadata:ta(e),...s}},eM=async(e,t)=>{if(e.statusCode>=300)return eq(e,t);let n=await (0,eY.he)(e.body,t),s={};return s=e9(n.AssumeRoleWithWebIdentityResult,t),{$metadata:ta(e),...s}},eq=async(e,t)=>{let n={...e,body:await (0,eY.OH)(e.body,t)},s=tB(e,n.body);switch(s){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await e_(n,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await eV(n,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await eB(n,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await eX(n,t);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await eG(n,t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await eL(n,t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await eN(n,t);default:return tl({output:e,parsedBody:n.body.Error,errorCode:s})}},e_=async(e,t)=>{let n=e.body,s=te(n.Error,t),i=new ek({$metadata:ta(e),...s});return(0,p.to)(i,n)},eG=async(e,t)=>{let n=e.body,s=tt(n.Error,t),i=new ez({$metadata:ta(e),...s});return(0,p.to)(i,n)},eL=async(e,t)=>{let n=e.body,s=tn(n.Error,t),i=new eO({$metadata:ta(e),...s});return(0,p.to)(i,n)},eN=async(e,t)=>{let n=e.body,s=ts(n.Error,t),i=new ej({$metadata:ta(e),...s});return(0,p.to)(i,n)},eV=async(e,t)=>{let n=e.body,s=ti(n.Error,t),i=new eD({$metadata:ta(e),...s});return(0,p.to)(i,n)},eB=async(e,t)=>{let n=e.body,s=tr(n.Error,t),i=new eT({$metadata:ta(e),...s});return(0,p.to)(i,n)},eX=async(e,t)=>{let n=e.body,s=to(n.Error,t),i=new e$({$metadata:ta(e),...s});return(0,p.to)(i,n)},eZ=(e,t)=>{let n={};if(null!=e[tO]&&(n[tO]=e[tO]),null!=e[tj]&&(n[tj]=e[tj]),null!=e[tC]){let s=eQ(e[tC],t);e[tC]?.length===0&&(n.PolicyArns=[]),Object.entries(s).forEach(([e,t])=>{n[`PolicyArns.${e}`]=t})}if(null!=e[tx]&&(n[tx]=e[tx]),null!=e[tw]&&(n[tw]=e[tw]),null!=e[tU]){let s=e5(e[tU],t);e[tU]?.length===0&&(n.Tags=[]),Object.entries(s).forEach(([e,t])=>{n[`Tags.${e}`]=t})}if(null!=e[tM]){let s=e6(e[tM],t);e[tM]?.length===0&&(n.TransitiveTagKeys=[]),Object.entries(s).forEach(([e,t])=>{n[`TransitiveTagKeys.${e}`]=t})}if(null!=e[tI]&&(n[tI]=e[tI]),null!=e[tY]&&(n[tY]=e[tY]),null!=e[tH]&&(n[tH]=e[tH]),null!=e[tz]&&(n[tz]=e[tz]),null!=e[tk]){let s=e2(e[tk],t);e[tk]?.length===0&&(n.ProvidedContexts=[]),Object.entries(s).forEach(([e,t])=>{n[`ProvidedContexts.${e}`]=t})}return n},eJ=(e,t)=>{let n={};if(null!=e[tO]&&(n[tO]=e[tO]),null!=e[tj]&&(n[tj]=e[tj]),null!=e[tG]&&(n[tG]=e[tG]),null!=e[tD]&&(n[tD]=e[tD]),null!=e[tC]){let s=eQ(e[tC],t);e[tC]?.length===0&&(n.PolicyArns=[]),Object.entries(s).forEach(([e,t])=>{n[`PolicyArns.${e}`]=t})}return null!=e[tx]&&(n[tx]=e[tx]),null!=e[tw]&&(n[tw]=e[tw]),n},eQ=(e,t)=>{let n={},s=1;for(let i of e)null!==i&&(Object.entries(e0(i,t)).forEach(([e,t])=>{n[`member.${s}.${e}`]=t}),s++);return n},e0=(e,t)=>{let n={};return null!=e[tL]&&(n[tL]=e[tL]),n},e1=(e,t)=>{let n={};return null!=e[tR]&&(n[tR]=e[tR]),null!=e[tb]&&(n[tb]=e[tb]),n},e2=(e,t)=>{let n={},s=1;for(let i of e)null!==i&&(Object.entries(e1(i,t)).forEach(([e,t])=>{n[`member.${s}.${e}`]=t}),s++);return n},e4=(e,t)=>{let n={};return null!=e[tv]&&(n[tv]=e[tv]),null!=e[t_]&&(n[t_]=e[t_]),n},e6=(e,t)=>{let n={},s=1;for(let t of e)null!==t&&(n[`member.${s}`]=t,s++);return n},e5=(e,t)=>{let n={},s=1;for(let i of e)null!==i&&(Object.entries(e4(i,t)).forEach(([e,t])=>{n[`member.${s}.${e}`]=t}),s++);return n},e8=(e,t)=>{let n={};return null!=e[tf]&&(n[tf]=(0,p.pY)(e[tf])),null!=e[tS]&&(n[tS]=(0,p.pY)(e[tS])),n},e3=(e,t)=>{let n={};return null!=e[tE]&&(n[tE]=e7(e[tE],t)),null!=e[tg]&&(n[tg]=e8(e[tg],t)),null!=e[tT]&&(n[tT]=(0,p.AF)(e[tT])),null!=e[tz]&&(n[tz]=(0,p.pY)(e[tz])),n},e9=(e,t)=>{let n={};return null!=e[tE]&&(n[tE]=e7(e[tE],t)),null!=e[tK]&&(n[tK]=(0,p.pY)(e[tK])),null!=e[tg]&&(n[tg]=e8(e[tg],t)),null!=e[tT]&&(n[tT]=(0,p.AF)(e[tT])),null!=e[t$]&&(n[t$]=(0,p.pY)(e[t$])),null!=e[tP]&&(n[tP]=(0,p.pY)(e[tP])),null!=e[tz]&&(n[tz]=(0,p.pY)(e[tz])),n},e7=(e,t)=>{let n={};return null!=e[th]&&(n[th]=(0,p.pY)(e[th])),null!=e[tW]&&(n[tW]=(0,p.pY)(e[tW])),null!=e[tF]&&(n[tF]=(0,p.pY)(e[tF])),null!=e[tA]&&(n[tA]=(0,p.CE)((0,p.aH)(e[tA]))),n},te=(e,t)=>{let n={};return null!=e[tN]&&(n[tN]=(0,p.pY)(e[tN])),n},tt=(e,t)=>{let n={};return null!=e[tN]&&(n[tN]=(0,p.pY)(e[tN])),n},tn=(e,t)=>{let n={};return null!=e[tN]&&(n[tN]=(0,p.pY)(e[tN])),n},ts=(e,t)=>{let n={};return null!=e[tN]&&(n[tN]=(0,p.pY)(e[tN])),n},ti=(e,t)=>{let n={};return null!=e[tN]&&(n[tN]=(0,p.pY)(e[tN])),n},tr=(e,t)=>{let n={};return null!=e[tN]&&(n[tN]=(0,p.pY)(e[tN])),n},to=(e,t)=>{let n={};return null!=e[tN]&&(n[tN]=(0,p.pY)(e[tN])),n},ta=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),tl=(0,p.PC)(ex),tc=async(e,t,n,s,i)=>{let{hostname:r,protocol:o="https",port:a,path:l}=await e.endpoint(),c={protocol:o,hostname:r,port:a,method:"POST",path:l.endsWith("/")?l.slice(0,-1)+n:l+n,headers:t};return void 0!==s&&(c.hostname=s),void 0!==i&&(c.body=i),new eE.aW(c)},td={"content-type":"application/x-www-form-urlencoded"},tu="2011-06-15",tp="Action",th="AccessKeyId",tm="AssumeRole",tf="AssumedRoleId",tg="AssumedRoleUser",ty="AssumeRoleWithWebIdentity",tS="Arn",tP="Audience",tE="Credentials",tb="ContextAssertion",tw="DurationSeconds",tA="Expiration",tI="ExternalId",tv="Key",tx="Policy",tC="PolicyArns",tR="ProviderArn",tk="ProvidedContexts",tD="ProviderId",tT="PackedPolicySize",t$="Provider",tO="RoleArn",tj="RoleSessionName",tW="SecretAccessKey",tK="SubjectFromWebIdentityToken",tz="SourceIdentity",tY="SerialNumber",tF="SessionToken",tU="Tags",tH="TokenCode",tM="TransitiveTagKeys",tq="Version",t_="Value",tG="WebIdentityToken",tL="arn",tN="message",tV=e=>Object.entries(e).map(([e,t])=>(0,p.jc)(e)+"="+(0,p.jc)(t)).join("&"),tB=(e,t)=>t.Error?.Code!==void 0?t.Error.Code:404==e.statusCode?"NotFound":void 0;class tX extends p.mY.classBuilder().ep(E).m(function(e,t,n,s){return[(0,ev.p2)(n,this.serialize,this.deserialize),(0,d.a3)(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,eR).ser(eF).de(eH).build(){}class tZ extends p.mY.classBuilder().ep(E).m(function(e,t,n,s){return[(0,ev.p2)(n,this.serialize,this.deserialize),(0,d.a3)(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(eW,eK).ser(eU).de(eM).build(){}class tJ extends eI{}(0,p.TW)({AssumeRoleCommand:tX,AssumeRoleWithWebIdentityCommand:tZ},tJ);var tQ=n(8876);let t0="us-east-1",t1=e=>{if("string"==typeof e?.Arn){let t=e.Arn.split(":");if(t.length>4&&""!==t[4])return t[4]}},t2=async(e,t,n)=>{let s="function"==typeof e?await e():e,i="function"==typeof t?await t():t;return n?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${s} (provider)`,`${i} (parent client)`,`${t0} (STS default)`),s??i??t0},t4=(e,t)=>{let n,s;return async(i,r)=>{if(s=i,!n){let{logger:i=e?.parentClientConfig?.logger,region:r,requestHandler:o=e?.parentClientConfig?.requestHandler,credentialProviderLogger:a}=e,l=await t2(r,e?.parentClientConfig?.region,a),c=!t5(o);n=new t({profile:e?.parentClientConfig?.profile,credentialDefaultProvider:()=>async()=>s,region:l,requestHandler:c?o:void 0,logger:i})}let{Credentials:o,AssumedRoleUser:a}=await n.send(new tX(r));if(!o||!o.AccessKeyId||!o.SecretAccessKey)throw Error(`Invalid response from STS.assumeRole call with role ${r.RoleArn}`);let l=t1(a),c={accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.SessionToken,expiration:o.Expiration,...o.CredentialScope&&{credentialScope:o.CredentialScope},...l&&{accountId:l}};return(0,tQ.P)(c,"CREDENTIALS_STS_ASSUME_ROLE","i"),c}},t6=(e,t)=>{let n;return async s=>{if(!n){let{logger:s=e?.parentClientConfig?.logger,region:i,requestHandler:r=e?.parentClientConfig?.requestHandler,credentialProviderLogger:o}=e,a=await t2(i,e?.parentClientConfig?.region,o),l=!t5(r);n=new t({profile:e?.parentClientConfig?.profile,region:a,requestHandler:l?r:void 0,logger:s})}let{Credentials:i,AssumedRoleUser:r}=await n.send(new tZ(s));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${s.RoleArn}`);let o=t1(r),a={accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration,...i.CredentialScope&&{credentialScope:i.CredentialScope},...o&&{accountId:o}};return o&&(0,tQ.P)(a,"RESOLVED_ACCOUNT_ID","T"),(0,tQ.P)(a,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),a}},t5=e=>e?.metadata?.handlerProtocol==="h2",t8=(e,t)=>t?class extends e{constructor(e){for(let n of(super(e),t))this.middlewareStack.use(n)}}:e,t3=(e={},t)=>t4(e,t8(eI,t)),t9=(e={},t)=>t6(e,t8(eI,t))},8536:e=>{e.exports={i8:"3.840.0"}}};